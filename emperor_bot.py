class RealityChecker:
    def __init__(self):
        self.absurd_patterns = {
            '–≤—Ä–µ–º—è': ['—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏', '–∫–æ—Ç–æ—Ä—ã–π —á–∞—Å', '–∫–æ–≥–¥–∞ —Å–µ–π—á–∞—Å'],
            '–ø–æ–≥–æ–¥–∞': ['–≤—ã–π–¥–µ—Ç —Å–æ–ª–Ω—Ü–µ', '–±—É–¥–µ—Ç –¥–æ–∂–¥—å', '–∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞'],
            '–º–∞–≥–∏—è': ['–ø–æ–ª—É—á—É –º–∏–ª–ª–∏–æ–Ω', '–ø–æ–¥–∞—Ä—è—Ç –∫–≤–∞—Ä—Ç–∏—Ä—É', '–≤—ã–∏–≥—Ä–∞—é –≤ –ª–æ—Ç–µ—Ä–µ—é'],
            '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–µ': ['—Å–µ–≥–æ–¥–Ω—è –∑–∞–º—É–∂', '–∑–∞–≤—Ç—Ä–∞ —Ä–æ–∂—É', '—Å—Ç–∞–Ω—É –±–æ–≥–∞—Ç—ã–º –∑–∞ –¥–µ–Ω—å']
        }
    
    def check_reality(self, question):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–ø—Ä–æ—Å –Ω–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å"""
        question_lower = question.lower()
        
        # 1. –ü–†–û–í–ï–†–ö–ê –ù–ê –†–ï–ê–õ–ò–ó–ú
        if self._check_timeframe(question_lower):
            return False, "‚è∞ –í–æ–ø—Ä–æ—Å –Ω–∞—Ä—É—à–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏. –•–æ—Ä–∞—Ä –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–æ–∑—Ä–∏–º–æ–µ –±—É–¥—É—â–µ–µ, –∞ –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —á—É–¥–µ—Å–∞."
        
        # 2. –ü–†–û–í–ï–†–ö–ê –ù–ê –ö–û–ù–ö–†–ï–¢–ò–ö–£
        if not self._has_specifics(question_lower):
            return False, "üéØ –£—Ç–æ—á–Ω–∏—Ç–µ –≤–æ–ø—Ä–æ—Å: –∫—Ç–æ, —á—Ç–æ, –∫–æ–≥–¥–∞, –∫–∞–∫–∏–µ —Å—Ä–æ–∫–∏? –ë–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏ –∞–Ω–∞–ª–∏–∑ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω."
        
        # 3. –ü–†–û–í–ï–†–ö–ê –ù–ê –ü–ê–°–°–ò–í–ù–û–°–¢–¨  
        if self._is_too_passive(question_lower):
            return False, "üö´ –í–æ–ø—Ä–æ—Å –∏—Å—Ö–æ–¥–∏—Ç –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ '–º–Ω–µ –¥–æ–ª–∂–Ω—ã'. –ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –≤–∞—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π."
        
        # 4. –ü–†–û–í–ï–†–ö–ê –ù–ê –ú–ê–°–®–¢–ê–ë
        if self._violates_scale(question_lower):
            return False, "üí´ –í–æ–ø—Ä–æ—Å –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –±–∞–∑–æ–≤—ã–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º. –•–æ—Ä–∞—Ä - –Ω–µ –≤–æ–ª—à–µ–±–Ω–∞—è –ø–∞–ª–æ—á–∫–∞."
        
        return True, "–í–æ–ø—Ä–æ—Å –ª–µ–≥–∏—Ç–∏–º–µ–Ω"
    
    def _check_timeframe(self, question):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–º–æ–∫"""
        urgent_indicators = ['—Å–µ–≥–æ–¥–Ω—è', '–∑–∞–≤—Ç—Ä–∞', '—Å–µ–π—á–∞—Å', '–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ', '—Å—Ä–æ—á–Ω–æ']
        big_changes = ['–∑–∞–º—É–∂', '—Ä–∞–∑–≤–µ–¥—É—Å—å', '—Ä–æ–∂—É', '—É–º—Ä—É', '—Å—Ç–∞–Ω—É –±–æ–≥–∞—Ç—ã–º', '–ø–æ–ª—É—á—É –º–∏–ª–ª–∏–æ–Ω']
        
        has_urgency = any(word in question for word in urgent_indicators)
        has_big_change = any(word in question for word in big_changes)
        
        return has_urgency and has_big_change
    
    def _has_specifics(self, question):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏"""
        specifics = ['–∫—Ç–æ', '—á—Ç–æ', '–∫–æ–≥–¥–∞', '–∫–∞–∫–æ–π', '–∫–∞–∫–∞—è', '—Å–∫–æ–ª—å–∫–æ', '–≥–¥–µ']
        has_some_specifics = any(word in question for word in specifics)
        
        # –ï—Å–ª–∏ –µ—Å—Ç—å –≥–ª–∞–≥–æ–ª—ã –¥–µ–π—Å—Ç–≤–∏—è - —Ç–æ–∂–µ –æ–∫
        action_verbs = ['–≤–µ—Ä–Ω—É—Ç', '–ø–æ–ª—É—á—É', '–≤—Å—Ç—Ä–µ—á—É', '—É—Å—Ç—Ä–æ—é—Å—å', '–∫—É–ø–ª—é', '–ø—Ä–æ–¥–∞–º']
        has_actions = any(verb in question for verb in action_verbs)
        
        return has_some_specifics or has_actions
    
    def _is_too_passive(self, question):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Å—Å–∏–≤–Ω—É—é –ø–æ–∑–∏—Ü–∏—é"""
        passive_patterns = [
            '–ø–æ–¥–∞—Ä—è—Ç –º–Ω–µ', '–¥–æ—Å—Ç–∞–Ω–µ—Ç—Å—è –º–Ω–µ', '—É–ø–∞–¥–µ—Ç —Å –Ω–µ–±–∞', 
            '–≤—ã–∏–≥—Ä–∞—é –±–µ–∑', '–ø–æ–ª—É—á—É –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫', '–º–Ω–µ –¥–æ–ª–∂–Ω—ã'
        ]
        return any(pattern in question for pattern in passive_patterns)
    
    def _violates_scale(self, question):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏"""
        unrealistic = [
            '–ø–æ–¥–∞—Ä—è—Ç –∫–≤–∞—Ä—Ç–∏—Ä—É', '–ø–æ–ª—É—á—É –º–∏–ª–ª–∏–æ–Ω', '—Å—Ç–∞–Ω—É –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–º',
            '–≤—Å—Ç—Ä–µ—á—É –ø—Ä–∏–Ω—Ü–∞', '–Ω–∞–π–¥—É –∫–ª–∞–¥', '–ø–µ—Ä–µ–µ–¥—É –≤ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω—É'
        ]
        urgent = ['—Å–µ–≥–æ–¥–Ω—è', '–∑–∞–≤—Ç—Ä–∞', '–Ω–∞ –Ω–µ–¥–µ–ª–µ']
        
        has_unrealistic = any(word in question for word in unrealistic)
        has_urgent = any(word in question for word in urgent)
        
        return has_unrealistic and has_urgent
    
    def suggest_better_question(self, original_question):
        """–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É"""
        question_lower = original_question.lower()
        
        if '–∑–∞–º—É–∂' in question_lower and '—Å–µ–≥–æ–¥–Ω—è' in question_lower:
            return "–ï—Å—Ç—å –ª–∏ —É –º–µ–Ω—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –≤—ã–π—Ç–∏ –∑–∞–º—É–∂ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 6 –º–µ—Å—è—Ü–µ–≤?"
        
        elif '–º–∏–ª–ª–∏–æ–Ω' in question_lower or '–¥–µ–Ω—å–≥–∏' in question_lower:
            return "–í–µ—Ä–Ω—É—Ç –ª–∏ –º–Ω–µ –¥–æ–ª–≥ –¥–æ –ø—è—Ç–Ω–∏—Ü—ã? –ò–ª–∏: –ü–æ–ª—É—á—É –ª–∏ —è –ø—Ä–µ–º–∏—é –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ?"
        
        elif '–∫–≤–∞—Ä—Ç–∏—Ä' in question_lower and '–ø–æ–¥–∞—Ä—è—Ç' in question_lower:
            return "–°—Ç–æ–∏—Ç –ª–∏ –º–Ω–µ –æ–∂–∏–¥–∞—Ç—å –ø–æ–º–æ—â–∏ —Å –∂–∏–ª—å–µ–º –æ—Ç —Å–µ–º—å–∏ –≤ —ç—Ç–æ–º –≥–æ–¥—É?"
        
        else:
            return "–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ: —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ª—é–¥–µ–π, —Å—Ä–æ–∫–æ–≤ –∏ –≤–∞—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π."

# –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–ª–∞—Å—Å HoraryBrain
class HoraryBrain:
    def __init__(self):
        self.experience = 0
        self.reality_checker = RealityChecker()
    
    def analyze_question_legitimacy(self, question):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–µ–≥–∏—Ç–∏–º–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º"""
        is_valid, message = self.reality_checker.check_reality(question)
        
        if not is_valid:
            suggestion = self.reality_checker.suggest_better_question(question)
            full_message = f"{message}\n\nüí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ç–∞–∫: ¬´{suggestion}¬ª"
            return False, full_message
        
        return True, "–í–æ–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç –∫ –∞–Ω–∞–ª–∏–∑—É"
